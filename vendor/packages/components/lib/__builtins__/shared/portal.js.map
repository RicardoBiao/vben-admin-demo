{"version":3,"file":"portal.js","sourceRoot":"lib/","sources":["__builtins__/shared/portal.ts"],"names":[],"mappings":";;;AAAA,2BAAyD;AACzD,oCAAgD;AAMhD,IAAM,SAAS,GAAG,IAAI,GAAG,EAAwB,CAAA;AAE1C,IAAM,oBAAoB,GAAG,UAAC,EAAmB;IACtD,IAAM,MAAM,GAAG,IAAA,qBAAe,EAAC;QAC7B,IAAI,EAAE,gBAAgB;QACtB,KAAK,EAAE;YACL,EAAE,EAAE;gBACF,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;gBACtB,OAAO,EAAE,EAAE;aACZ;SACF;QAED,KAAK,YAAC,KAAK;YACT,IAAA,qBAAe,EAAC;gBACN,IAAA,EAAE,GAAK,KAAK,GAAV,CAAU;gBACpB,IAAI,EAAE,IAAI,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;oBAC3B,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;iBACrB;YACH,CAAC,CAAC,CAAA;QACJ,CAAC;QAED,MAAM;YACI,IAAA,EAAE,GAAK,IAAI,GAAT,CAAS;YACnB,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;gBAC5B,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,CAAA;aACxB;YAED,OAAO,IAAA,OAAC,EAAC,uBAAiB,EAAE,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;QAC9C,CAAC;KACF,CAAC,CAAA;IAEF,OAAO,MAAM,CAAA;AACf,CAAC,CAAA;AA9BY,QAAA,oBAAoB,wBA8BhC;AAED,SAAgB,gBAAgB,CAAC,EAAmB;IAClD,OAAO,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;AAC1B,CAAC;AAFD,4CAEC","sourcesContent":["import { defineComponent, onBeforeUnmount, h } from 'vue'\r\nimport { FragmentComponent } from '@formily/vue'\r\n\r\nexport interface IPortalProps {\r\n  id?: string | symbol\r\n}\r\n\r\nconst PortalMap = new Map<string | symbol, any>()\r\n\r\nexport const createPortalProvider = (id: string | symbol) => {\r\n  const Portal = defineComponent({\r\n    name: 'ProtalProvider',\r\n    props: {\r\n      id: {\r\n        type: [String, Symbol],\r\n        default: id,\r\n      },\r\n    },\r\n\r\n    setup(props) {\r\n      onBeforeUnmount(() => {\r\n        const { id } = props\r\n        if (id && PortalMap.has(id)) {\r\n          PortalMap.delete(id)\r\n        }\r\n      })\r\n    },\r\n\r\n    render() {\r\n      const { id } = this\r\n      if (id && !PortalMap.has(id)) {\r\n        PortalMap.set(id, this)\r\n      }\r\n\r\n      return h(FragmentComponent, {}, this.$slots)\r\n    },\r\n  })\r\n\r\n  return Portal\r\n}\r\n\r\nexport function getProtalContext(id: string | symbol) {\r\n  return PortalMap.get(id)\r\n}\r\n"]}