{"version":3,"file":"index.js","sourceRoot":"lib/","sources":["form-layout/index.ts"],"names":[],"mappings":"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","sourcesContent":["import type { InjectionKey, Ref } from 'vue'\r\nimport { provide, inject, defineComponent, ref, watch, h } from 'vue'\r\nimport { stylePrefix } from '../__builtins__/configs'\r\nimport { useResponsiveFormLayout } from './useResponsiveFormLayout'\r\n\r\nexport type FormLayoutProps = {\r\n  className?: string\r\n  colon?: boolean\r\n  labelAlign?: 'right' | 'left' | ('right' | 'left')[]\r\n  wrapperAlign?: 'right' | 'left' | ('right' | 'left')[]\r\n  labelWrap?: boolean\r\n  labelWidth?: number\r\n  wrapperWidth?: number\r\n  wrapperWrap?: boolean\r\n  labelCol?: number | number[]\r\n  wrapperCol?: number | number[]\r\n  fullness?: boolean\r\n  size?: 'small' | 'default' | 'large'\r\n  layout?:\r\n    | 'vertical'\r\n    | 'horizontal'\r\n    | 'inline'\r\n    | ('vertical' | 'horizontal' | 'inline')[]\r\n  direction?: 'rtl' | 'ltr'\r\n  shallow?: boolean\r\n  feedbackLayout?: 'loose' | 'terse' | 'popover'\r\n  tooltipLayout?: 'icon' | 'text'\r\n  bordered?: boolean\r\n  breakpoints?: number[]\r\n  inset?: boolean\r\n  spaceGap?: number\r\n  gridColumnGap?: number\r\n  gridRowGap?: number\r\n}\r\n\r\nexport const FormLayoutDeepContext: InjectionKey<Ref<FormLayoutProps>> = Symbol(\r\n  'FormLayoutDeepContext'\r\n)\r\n\r\nexport const FormLayoutShallowContext: InjectionKey<Ref<FormLayoutProps>> =\r\n  Symbol('FormLayoutShallowContext')\r\n\r\nexport const useFormDeepLayout = (): Ref<FormLayoutProps> =>\r\n  inject(FormLayoutDeepContext, ref({}))\r\n\r\nexport const useFormShallowLayout = (): Ref<FormLayoutProps> =>\r\n  inject(FormLayoutShallowContext, ref({}))\r\n\r\nexport const useFormLayout = (): Ref<FormLayoutProps> => {\r\n  const shallowLayout = useFormShallowLayout()\r\n  const deepLayout = useFormDeepLayout()\r\n  const formLayout = ref({\r\n    ...deepLayout.value,\r\n    ...shallowLayout.value,\r\n  })\r\n\r\n  watch(\r\n    [shallowLayout, deepLayout],\r\n    () => {\r\n      formLayout.value = {\r\n        ...deepLayout.value,\r\n        ...shallowLayout.value,\r\n      }\r\n    },\r\n    {\r\n      deep: true,\r\n    }\r\n  )\r\n  return formLayout\r\n}\r\n\r\nexport const FormLayout = defineComponent({\r\n  name: 'FFormLayout',\r\n  props: {\r\n    className: {},\r\n    colon: { default: true },\r\n    labelAlign: {},\r\n    wrapperAlign: {},\r\n    labelWrap: { default: false },\r\n    labelWidth: {},\r\n    wrapperWidth: {},\r\n    wrapperWrap: { default: false },\r\n    labelCol: {},\r\n    wrapperCol: {},\r\n    fullness: { default: false },\r\n    size: { default: 'default' },\r\n    layout: { default: 'horizontal' },\r\n    direction: { default: 'ltr' },\r\n    shallow: { default: true },\r\n    feedbackLayout: {},\r\n    tooltipLayout: {},\r\n    bordered: { default: true },\r\n    inset: { default: false },\r\n    breakpoints: {},\r\n    spaceGap: {},\r\n    gridColumnGap: {},\r\n    gridRowGap: {},\r\n  },\r\n  setup(customProps, { slots }) {\r\n    const { props } = useResponsiveFormLayout(customProps as any)\r\n\r\n    const deepLayout = useFormDeepLayout()\r\n    const newDeepLayout = ref({\r\n      ...deepLayout.value,\r\n    })\r\n    const shallowProps = ref({})\r\n\r\n    watch(\r\n      [props, deepLayout],\r\n      () => {\r\n        shallowProps.value = props.value.shallow ? props.value : undefined\r\n        if (!props.value.shallow) {\r\n          Object.assign(newDeepLayout.value, props.value)\r\n        } else {\r\n          if (props.value.size) {\r\n            newDeepLayout.value.size = props.value.size\r\n          }\r\n          if (props.value.colon) {\r\n            newDeepLayout.value.colon = props.value.colon\r\n          }\r\n        }\r\n      },\r\n      { deep: true, immediate: true }\r\n    )\r\n\r\n    provide(FormLayoutDeepContext, newDeepLayout)\r\n    provide(FormLayoutShallowContext, shallowProps)\r\n\r\n    const formPrefixCls = `${stylePrefix}-form`\r\n    return () => {\r\n      const classNames = {\r\n        [`${formPrefixCls}-${props?.value.layout}`]: true,\r\n        [`${formPrefixCls}-rtl`]: props?.value.direction === 'rtl',\r\n        [`${formPrefixCls}-${props?.value.size}`]:\r\n          props?.value.size !== undefined,\r\n        [`${props?.value.className}`]: props?.value.className !== undefined,\r\n      }\r\n      return h(\r\n        'div',\r\n        {\r\n          ref: 'root',\r\n          class: classNames,\r\n        },\r\n        slots\r\n      )\r\n    }\r\n  },\r\n})\r\n\r\nexport default FormLayout\r\n"]}